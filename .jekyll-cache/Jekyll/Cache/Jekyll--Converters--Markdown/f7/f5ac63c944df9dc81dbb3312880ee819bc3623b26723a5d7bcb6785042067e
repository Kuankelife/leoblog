I"¯<p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1537012717707&amp;di=93b200d1c628327cd3686e48bccae82e&amp;imgtype=0&amp;src=http%3A%2F%2Fimg.mp.sohu.com%2Fupload%2F20170625%2F1f1509fb3265468b895c0515c2c9de3b.png" width="400" height="400" /></p>

<hr />
<center>æœ¬æ–‡åªç”¨äºå¹³æ—¶æ•™å­¦å­¦ä¹ ï¼Œæœªç»å¾—ä½œè€…åŒæ„ç¦æ­¢ç›´æ¥è½¬è½½æˆ–ç¼–è¾‘åè½¬è½½ã€‚</center>

<hr />
<h1 id="pythonæ•°æ®å¯è§†åŒ–æ•™ç¨‹æ›´æ–°è‡³2018-10-01"><center>Pythonæ•°æ®å¯è§†åŒ–æ•™ç¨‹ï¼ˆæ›´æ–°è‡³2018-10-01ï¼‰</center></h1>

<h1 id="å…¥é—¨--ä¼ å‰‘">å…¥é—¨  (ä¼ å‰‘ï¼‰</h1>

<h2 id="matplotlibæ•°æ®å¯è§†åŒ–">Matplotlibæ•°æ®å¯è§†åŒ–</h2>

<h2 id="ç®€ä»‹">ç®€ä»‹</h2>

<ul>
  <li>
    <p>åœ¨æ•°æ®ç§‘å­¦ä¸­ï¼Œæ•°æ®å¯è§†åŒ–æ˜¯ç ”ç©¶çš„å…¶ä¸­ä¸€éƒ¨ä»½å·¥ä½œï¼Œå®ƒæ˜¯ä¸ºäº†å°†å¤„ç†åçš„æ•°æ®å‘ˆç°ç»™éœ€è¦çš„äººï¼Œå› ä¸ºæœ‰æ—¶å€™æœ‰è§„å¾‹çš„ç»“æœéœ€è¦ä»¥å›¾è¡¨çš„å½¢å¼å‘ˆ
ç°ï¼Œå³ä½¿å¦‚æ­¤ï¼Œäººä»¬ä»å‘ˆç°å‡ºæ¥çš„å›¾è¡¨è·å–çš„ä¿¡æ¯é‡è¿˜è¿œè¿œä¸å¤Ÿï¼Œè¿™å°±è¦æ±‚ç”»å›¾è€…éœ€è¦ä½¿ç”¨å¤šæ ·åŒ–çš„å›¾è¡¨æ¥å‘ˆç°ç»“æœã€‚</p>
  </li>
  <li>
    <p>æ•°æ®å¯è§†åŒ–æ˜¯ä¸€é¡¹æŠ€èƒ½ï¼Œçœ‹ä¼¼ç®€å•ï¼Œä½†æ˜¯ä¹Ÿé¢ä¸´ç€å·¨å¤§çš„æŒ‘æˆ˜ï¼Œç”±æ­¤æŠ€æœ¯äººå‘˜å¼€å‘äº†å¾ˆå¤šå¯è§†åŒ–å·¥å…·ï¼Œå¯ä»¥è¯´ï¼Œå¦‚æœä¸€é—¨ç¼–ç¨‹è¯­è¨€æ²¡æœ‰å¯è§†åŒ–çš„åŠŸèƒ½ï¼Œé‚£å®ƒåœ¨æ•°æ®ç§‘å­¦ä¸Šçš„æ¨å¹¿å¿…ç„¶å¾ˆåƒåŠ›ï¼Œè€Œä½œä¸ºData scienceçš„ç¼–ç¨‹æ–°æ˜Ÿ<strong><code class="language-plaintext highlighter-rouge">Python</code></strong>ï¼ˆåœ¨2018å¹´9æœˆ26æ—¥å‘å¸ƒäº†3.71ç‰ˆæœ¬ï¼‰ï¼Œå¿…ç„¶å°‘ä¸äº†å¯è§†åŒ–å·¥å…·<strong>Matplotlib</strong>, Matplotlibæ˜¯Pythonä¸­æœ€å¸¸ç”¨çš„å¯è§†åŒ–å·¥å…·ä¹‹ä¸€ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿åœ°åˆ›å»ºæµ·é‡ç±»å‹çš„2Då›¾è¡¨å’Œä¸€äº›åŸºæœ¬çš„3Då›¾è¡¨, å®ƒå°±æ˜¯æˆ‘æ¥ä¸‹æ¥è¦è¯¦ç»†ä»‹ç»çš„å†…å®¹ã€‚</p>
  </li>
</ul>

<blockquote>
  <p>Matplotlibåº“ç”±å„ç§å¯è§†åŒ–ç±»æ„æˆï¼Œå†…éƒ¨ç»“æ„å¤æ‚, Matplotlib.pyplotæ˜¯ç»˜åˆ¶å„ç±»å¯è§†åŒ–å›¾å½¢çš„å‘½ä»¤å­åº“ï¼Œå…¶å®é£æ ¼å’ŒMatlabçš„ç»˜å›¾é£æ ¼å·®ä¸å¤šï¼Œæ²¡é”™ï¼Œå¼€å‘è€…å°±æ˜¯æ¨¡ä»¿Matlabçš„ç»˜å›¾é£æ ¼ï¼Œæ‰€ä»¥å­¦è¿‡Matlabç»˜å›¾çš„åŒå­¦ï¼Œå¯¹Matplotlibçš„å­¦ä¹ å°±ä¸éœ€è¦å¿ƒæ€€ææƒ§ï¼Œæ²¡å­¦è¿‡Matlabçš„åŒå­¦ä¹Ÿä¸å¿…æ‹…å¿ƒï¼Œjust follow me step by step, ä½ ä¼šå°‘èµ°å¾ˆå¤šå¼¯è·¯ã€‚</p>
</blockquote>

<blockquote>
  <p>å…¶å®å®˜æ–¹å’Œç½‘ä¸Šéƒ½æœ‰å…³äºMatplotlibçš„æ•™ç¨‹ï¼Œä½†éƒ½ä¸å…¨é¢ï¼Œä¹Ÿä¸å¤Ÿæ·±å…¥ï¼Œæœ‰çš„æ•™ç¨‹ä¹Ÿæ˜¯çœ‹ç€çœ‹ç€å°±ç¡ç€äº†ï¼Œæˆ‘å…¶å®ä¹Ÿæ˜¯æƒ³å†™ä¸€ç¯‡æ— æ¯”è¯¦ç»†çš„æ•™ç¨‹ï¼Œå¯æ˜¯å†™åˆ°å››åˆ†ä¹‹ä¸€æˆ‘å°±æ”¾å¼ƒäº†ï¼Œæ•°æ®å¯è§†åŒ–æ˜¯ä¸ºå‘ˆç°ç»“æœï¼Œæ³¨é‡çš„æ˜¯å®ç”¨æ€§ï¼Œè®©çœ‹å›¾è€…æœ€çŸ­æ—¶é—´å»ä»å›¾è¡¨è·å–æœ€å¤šçš„ä¿¡æ¯ï¼Œæ•…é€‰æ‹©ä»€ä¹ˆç±»å‹çš„å›¾è¡¨å°±æ˜¾å¾—æä¸ºé‡è¦ï¼ŒåŒæ—¶è¦ç¾è§‚ï¼Œä¸‹ä¸€æ­¥æ‰æ˜¯å„ç§å›¾çš„å­¦ä¹ ã€‚æ•…æˆ‘æŠŠå…¥é—¨æ•™ç¨‹åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œ<strong>æ¨¡ä»¿ç¯‡</strong>ï¼Œ<strong>ç¾åŒ–ç¯‡</strong>ï¼Œ<strong>æ‹“å±•ç¯‡</strong>ï¼Œè¿™æ˜¯ç¬¦åˆå¤§å¤šæ•°äººçš„å­¦ä¹ è·¯å¾„ã€‚</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c1">#é¦–å…ˆå¯¼å…¥ç”»å›¾çš„åº“ï¼Œä½¿ç”¨æ–¹æ³•ä¸º
</span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">'axes.unicode_minus'</span><span class="p">]</span><span class="o">=</span><span class="bp">False</span>
<span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">'font.sans-serif'</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s">'SimHei'</span><span class="p">]</span> <span class="c1">#æŒ‡å®šé»˜è®¤å­—ä½“ SimHeiä¸ºé»‘ä½“
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="æ¨¡ä»¿ç¯‡">æ¨¡ä»¿ç¯‡</h2>

<p>ä¸ºäº†å­¦å¾—æ›´æ„‰å¿«ï¼Œæˆ‘ä¸ä¼šä¸€ä¸‹å­å¡ä¸€å¤§å †ä¸œè¥¿ç»™ä½ ï¼Œé™¤éä½ æ˜¯<strong>AI</strong>.</p>

<h3 id="åŸå§‹å›¾">åŸå§‹å›¾</h3>
<p>é¦–å…ˆæˆ‘ä»¬ç”¨äº”è¡Œä»£ç å°±å¯¹ä¸Šè¯æŒ‡æ•°åšäº†ç®€å•çš„å¯è§†åŒ–</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="n">data</span> <span class="o">=</span> <span class="n">get_price</span><span class="p">(</span><span class="s">"000001.XSHG"</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s">'2018-06-01'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s">'2018-09-29'</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="s">'daily'</span><span class="p">).</span><span class="n">close</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">values</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_11_0.png" /></p>

<h3 id="xè½´æ—¶é—´">xè½´æ—¶é—´</h3>
<p>çœ‹å›¾è€…åªçœ‹åˆ°ä¸€æ¡æ›²çº¿ï¼Œä¸çŸ¥åˆ°x,yè½´ä»£è¡¨ä»€ä¹ˆæ„æ€ï¼Œè€Œæˆ‘ä»¬çŸ¥é“xè½´åº”è¯¥æ˜¯æ—¶é—´æ‰å¯¹ï¼Œé‚£ä¹ˆåŠ ä¸Šå»</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c1">#æŠŠxè½´æ”¹ä¸ºæ—¶é—´åˆ—è¡¨
</span><span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">values</span>
<span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_13_0.png" /></p>

<h3 id="x-yè½´label">x, yè½´label</h3>
<p>å³ä½¿çœ‹å›¾è€…é€šè¿‡æ—¥æœŸçŸ¥é“äº†xè½´ä»£è¡¨æ—¶é—´ï¼Œä½†æ˜¯yè½´å‘¢ï¼Œyè½´ä»£è¡¨çš„æŒ‡æ•°æ²¡æœ‰å•ä½ï¼Œæ‰€ä»¥åŠ ä¸Šlabel.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'æ—¶é—´'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'æŒ‡æ•°'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_15_0.png" /></p>

<h3 id="æ ‡é¢˜">æ ‡é¢˜</h3>
<p>ç”»å›¾æ€»å¾—æœ‰ä¸ªæ ‡é¢˜å§</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">'æŒ‡æ•°èµ°åŠ¿'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'æ—¶é—´'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'æŒ‡æ•°'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_17_0.png" /></p>

<h3 id="å¤šæ¡æ›²çº¿">å¤šæ¡æ›²çº¿</h3>
<p>å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½éœ€è¦åœ¨åŒä¸€å¼ å›¾é‡Œç”»å¤šæ¡æ›²çº¿</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="n">data_2</span> <span class="o">=</span> <span class="n">get_price</span><span class="p">(</span><span class="s">"000016.XSHG"</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s">'2018-06-01'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s">'2018-09-28'</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="s">'daily'</span><span class="p">).</span><span class="n">close</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">data_2</span><span class="p">.</span><span class="n">values</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'æ—¶é—´'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'æŒ‡æ•°'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">'ä¸Šè¯æŒ‡æ•°å’Œä¸Šè¯50æŒ‡æ•°'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y2</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_19_0.png" /></p>
<h3 id="å›¾ä¾‹">å›¾ä¾‹</h3>
<p>è¿˜æœ‰ï¼Œæ€ä¹ˆçŸ¥é“ä¸¤æ¡æ›²çº¿ä»£è¡¨å“ªä¸ªæŒ‡æ•°ï¼Ÿæ‰€ä»¥éœ€è¦åŠ ä¸Šå›¾ä¾‹</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="c1">#åˆ›å»ºä¸€ä¸ªå›¾ä¾‹ï¼Œä¸è¦é—®ä¸ºä»€ä¹ˆï¼Œå…¶å®ç›¸å½“äºå®ä¾‹åŒ–ï¼Œæ²¡å­¦è¿‡ç±»çš„è¯å¯ä»¥ä¸ç®¡ï¼Œçœ‹ç€çœ‹ç€å°±ä¼šæ‡‚äº†ã€‚ã€‚ã€‚
</span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">u'ä¸Šè¯æŒ‡æ•°å’Œä¸Šè¯50æŒ‡æ•°'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'æ—¶é—´'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'æŒ‡æ•°'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">label</span> <span class="o">=</span> <span class="s">'ä¸Šè¯50æŒ‡æ•°'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">label</span> <span class="o">=</span> <span class="s">'ä¸Šè¯æŒ‡æ•°'</span><span class="p">)</span>
<span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_21_0.png" /></p>

<p>è¿™æ ·ï¼Œä¸€ä¸ªæˆå‹çš„å›¾ç”»å‡ºæ¥äº†ï¼Œä¼¼ä¹çœ‹èµ·æ¥æœ‰ç‚¹ä¸‘ã€‚ã€‚ã€‚ã€‚</p>

<h2 id="ç¾åŒ–ç¯‡">ç¾åŒ–ç¯‡</h2>

<blockquote>
  <p>ä½œä¸ºå¼ºè¿«ç—‡çš„é‡åº¦æ‚£è€…ï¼Œè‡ªç„¶å¯¹ä¸Šé¢çš„å›¾åè§†ä¸ç†äº†!!!</p>
</blockquote>

<h3 id="å›¾çš„å¤§å°">å›¾çš„å¤§å°</h3>
<p>é¦–å…ˆå›¾å¤ªå°äº†ï¼Œèƒ½ä¸èƒ½æ”¾å¤§ä¸€ç‚¹ï¼Ÿèƒ½ï¼</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">u'ä¸Šè¯æŒ‡æ•°å’Œä¸Šè¯50æŒ‡æ•°'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'æ—¶é—´'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'æŒ‡æ•°'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">label</span> <span class="o">=</span> <span class="s">'ä¸Šè¯50æŒ‡æ•°'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">label</span> <span class="o">=</span> <span class="s">'ä¸Šè¯æŒ‡æ•°'</span><span class="p">)</span>
<span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_26_0.png" /></p>

<p>æ•´ä¸ªäººèˆ’ç•…äº†å¾ˆå¤šäº†ã€‚ã€‚ã€‚</p>

<h3 id="å›¾ä¾‹å­—ä½“æ ·å¼åŠå¤§å°">å›¾ä¾‹å­—ä½“æ ·å¼åŠå¤§å°</h3>
<p>å­—ä½“ä¹Ÿä¸æ»¡æ„</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="c1">#è®¾ç½®å›¾ä¾‹å¹¶ä¸”è®¾ç½®å›¾ä¾‹çš„å­—ä½“åŠå¤§å°
</span><span class="n">font1</span> <span class="o">=</span> <span class="p">{</span><span class="s">'family'</span> <span class="p">:</span> <span class="s">'Times New Roman'</span><span class="p">,</span>
<span class="s">'weight'</span> <span class="p">:</span> <span class="s">'normal'</span><span class="p">,</span>
<span class="s">'size'</span>   <span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'time'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'index'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y2</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">([</span><span class="s">'ä¸Šè¯50æŒ‡æ•°'</span><span class="p">,</span><span class="s">'ä¸Šè¯æŒ‡æ•°'</span><span class="p">])</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>/opt/conda/envs/python2new/lib/python2.7/site-packages/matplotlib/font_manager.py:1297: UserWarning: findfont: Font family [u'Times New Roman'] not found. Falling back to DejaVu Sans
  (prop.get_family(), self.defaultFamily[fontext]))
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_29_1.png" /></p>

<h3 id="æ›²çº¿çš„é¢œè‰²">æ›²çº¿çš„é¢œè‰²</h3>
<ul>
  <li>
    <p>çº¿çš„é¢œè‰²ä¸åˆæˆ‘çš„å¿ƒæ„ï¼Œæ”¹ï¼</p>
  </li>
  <li>
    <p>colorç”¨äºè®¾ç½®é¢œè‰²</p>
  </li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'time'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'index'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'r'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'g'</span><span class="p">)</span>
<span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">([</span><span class="s">'ä¸Šè¯50æŒ‡æ•°'</span><span class="p">,</span><span class="s">'ä¸Šè¯æŒ‡æ•°'</span><span class="p">])</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_31_0.png" /></p>

<h3 id="çº¿æ¡çš„ç²—ç»†">çº¿æ¡çš„ç²—ç»†</h3>
<ul>
  <li>ä¼¼ä¹çº¿æ¡ç²—ä¸€ç‚¹æ›´å¥½çœ‹ã€‚ã€‚ã€‚ã€‚</li>
  <li>linewidthç”¨äºä¿®æ”¹çº¿æ¡é¢œè‰²</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'time'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'index'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'r'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'g'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">([</span><span class="s">'ä¸Šè¯50æŒ‡æ•°'</span><span class="p">,</span><span class="s">'ä¸Šè¯æŒ‡æ•°'</span><span class="p">])</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_33_0.png" /></p>

<p>è€³ç›®ä¸€æ–°äº†ï¼ï¼ï¼</p>

<h3 id="å›¾ä¾‹çš„ä½ç½®">å›¾ä¾‹çš„ä½ç½®</h3>

<h4 id="è°ƒæ•´åœ¨å›¾é‡Œçš„ä½ç½®">è°ƒæ•´åœ¨å›¾é‡Œçš„ä½ç½®</h4>

<ul>
  <li>
    <p>å›¾ä¾‹åœ¨å›¾å†…æœ‰æ—¶ä¼šå’Œæ›²çº¿é‡åˆï¼Œè€Œå›¾ä¾‹çš„ä½ç½®ä¹Ÿå¯ä»¥è°ƒæ•´ï¼Œå…·ä½“çš„å‚æ•°å°±ä¸åˆ—ä¸¾äº†ï¼Œå¯ä»¥è‡ªè¡Œç½‘ä¸ŠæŸ¥é˜…ï¼Œæ¯”å¦‚å›¾çš„å›¾ä¾‹åœ¨å³ä¸Šè§’ï¼Œæˆ‘è®¾ç½®ä¸ºå·¦ä¸Šè§’</p>
  </li>
  <li>
    <p>å‚æ•°locç”¨äºè®¾ç½®legendçš„ä½ç½®</p>
  </li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'time'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'index'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'r'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'g'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">([</span><span class="s">'ä¸Šè¯50æŒ‡æ•°'</span><span class="p">,</span><span class="s">'ä¸Šè¯æŒ‡æ•°'</span><span class="p">],</span><span class="n">loc</span><span class="o">=</span><span class="s">'upper left'</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_37_0.png" /></p>

<h4 id="å›¾ä¾‹ç§»åŠ¨åœ¨å›¾å¤–çš„ä½ç½®">å›¾ä¾‹ç§»åŠ¨åœ¨å›¾å¤–çš„ä½ç½®</h4>
<ul>
  <li>
    <p>æœ‰æ—¶å€™å›¾ä¾‹å¤ªå¤§ï¼Œå†…å®¹å¤ªå¤šï¼Œå’Œæ›²çº¿æœ‰é‡åˆï¼ŒæŠŠå›¾ä¾‹æ”¾åœ¨å›¾å¤–æ˜¯ä¸é”™çš„é€‰æ‹©ã€‚</p>
  </li>
  <li>
    <p>bbox_to_anchorç”¨äºåœ¨bbox_transformåæ ‡ï¼ˆé»˜è®¤è½´åæ ‡ï¼‰ä¸­ä¸ºå›¾ä¾‹æŒ‡å®šä»»æ„ä½ç½®</p>
  </li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'time'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'index'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'r'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'g'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">([</span><span class="s">'ä¸Šè¯50æŒ‡æ•°'</span><span class="p">,</span><span class="s">'ä¸Šè¯æŒ‡æ•°'</span><span class="p">],</span><span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span><span class="mf">1.0</span><span class="p">),</span><span class="n">borderaxespad</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_39_0.png" /></p>

<h3 id="æ ¼å­">æ ¼å­</h3>
<p>é«˜ç«¯ä¸€ç‚¹ï¼ŸåŠ ä¸ªæ ¼å­ä¸Šå»ï¼Œä¸–ç•Œæ¯ä¹‹åå¯¹æ ¼å­è«åçš„å–œæ¬¢</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'time'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'index'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'r'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'g'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">([</span><span class="s">'ä¸Šè¯50æŒ‡æ•°'</span><span class="p">,</span><span class="s">'ä¸Šè¯æŒ‡æ•°'</span><span class="p">])</span>
<span class="n">ax</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_41_0.png" /></p>

<h3 id="æ ·å¼">æ ·å¼</h3>
<p>å…¶å®matploblibè‡ªå¸¦å¾ˆå¤š<strong>æ ·å¼</strong></p>

<h4 id="grayscale--style">grayscale  style</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="n">plt</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="n">use</span><span class="p">(</span><span class="s">"grayscale"</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'time'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'index'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'r'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'g'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">([</span><span class="s">'ä¸Šè¯50æŒ‡æ•°'</span><span class="p">,</span><span class="s">'ä¸Šè¯æŒ‡æ•°'</span><span class="p">])</span>
<span class="n">ax</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_44_0.png" /></p>

<h4 id="ggplot--style">ggplot  style</h4>
<p>ä½œä¸ºRå’ŒPythonçš„å…¼ä¿®è€…ï¼Œæˆ‘æŠŠRçš„ggplotæ ·å¼æ¬åˆ°Pythonæ¥äº†ï¼Œå› ä¸ºè¿™æ˜¯æˆ‘æœ€æ»¡æ„çš„æ ·å¼ï¼Œä½†æœ‰æ—¶ä¹Ÿä¼šå°é—®é¢˜ä¸æ–­ã€‚ã€‚ã€‚ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="n">plt</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="n">use</span><span class="p">(</span><span class="s">"ggplot"</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'time'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'index'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'r'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'g'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">([</span><span class="s">'ä¸Šè¯50æŒ‡æ•°'</span><span class="p">,</span><span class="s">'ä¸Šè¯æŒ‡æ•°'</span><span class="p">])</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_46_0.png" /></p>

<h4 id="bmh--style">bmh  style</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="n">plt</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="n">use</span><span class="p">(</span><span class="s">"bmh"</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'time'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'index'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'r'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'g'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">([</span><span class="s">'ä¸Šè¯50æŒ‡æ•°'</span><span class="p">,</span><span class="s">'ä¸Šè¯æŒ‡æ•°'</span><span class="p">])</span>
<span class="n">ax</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_48_0.png" /></p>

<h4 id="dark_background--style">dark_background  style</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="n">plt</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="n">use</span><span class="p">(</span><span class="s">"dark_background"</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'time'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'index'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'r'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'g'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">([</span><span class="s">'ä¸Šè¯50æŒ‡æ•°'</span><span class="p">,</span><span class="s">'ä¸Šè¯æŒ‡æ•°'</span><span class="p">])</span>
<span class="n">ax</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_50_0.png" /></p>

<h4 id="fivethirtyeight--style">fivethirtyeight  style</h4>
<p>æ­¤å¤„å›¾ä¾‹å’ŒèƒŒæ™¯åŒè‰²ï¼ŒåŸå› æ˜¯ä¸Šé¢è°ƒç”¨å¤ªå¤šstyle, å¯¼è‡´å‡ºé”™ï¼Œæ¯ä¸ªstyleå•ç‹¬ç”¨æ˜¯ä¸ä¼šå‡ºç°è¿™ç§é—®é¢˜ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="n">plt</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="n">use</span><span class="p">(</span><span class="s">"fivethirtyeight"</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'time'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'index'</span><span class="p">,</span><span class="n">font1</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'r'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'g'</span><span class="p">,</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">([</span><span class="s">'ä¸Šè¯50æŒ‡æ•°'</span><span class="p">,</span><span class="s">'ä¸Šè¯æŒ‡æ•°'</span><span class="p">])</span>
<span class="n">ax</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_52_0.png" /></p>

<blockquote>
  <p>å¦‚æ— å…¶ä»–è¯´æ˜ï¼Œä¸‹é¢çš„éƒ¨åˆ†æˆ‘å°†ä½¿ç”¨ggplotæ ·å¼</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">plt</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="n">use</span><span class="p">(</span><span class="s">"ggplot"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="æ‹“å±•ç¯‡">æ‹“å±•ç¯‡</h2>

<h3 id="å¤šä¸ªå­å›¾ç½‘æ ¼">å¤šä¸ªå­å›¾(ç½‘æ ¼ï¼‰</h3>
<ul>
  <li>å¯é€‰å‚æ•°ç”¨numRows, numCols, plotNum</li>
</ul>

<hr />
<p>åœ¨Matplotlibä¸‹, ä¸€ä¸ª Figure å¯¹è±¡å¯ä»¥åŒ…å«å¤šä¸ªå­å›¾(Axes), å¯ä»¥ä½¿ç”¨ subplot() å¿«é€Ÿç»˜åˆ¶, å…¶è°ƒç”¨å½¢å¼å¦‚ä¸‹</p>

<blockquote>
  <p>subplot(numRows, numCols, plotNum)</p>
</blockquote>

<ul>
  <li>
    <p>å›¾è¡¨çš„æ•´ä¸ªç»˜å›¾åŒºåŸŸè¢«åˆ†æˆ numRows è¡Œå’Œ numCols åˆ—</p>
  </li>
  <li>
    <p>ç„¶åæŒ‰ç…§ä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹çš„é¡ºåºå¯¹æ¯ä¸ªå­åŒºåŸŸè¿›è¡Œç¼–å·ï¼Œå·¦ä¸Šçš„å­åŒºåŸŸçš„ç¼–å·ä¸º1</p>
  </li>
  <li>
    <p>plotNum å‚æ•°æŒ‡å®šåˆ›å»ºçš„ Axes å¯¹è±¡æ‰€åœ¨çš„åŒºåŸŸ</p>
  </li>
</ul>

<hr />

<h3 id="è§„åˆ™åˆ’åˆ†">è§„åˆ™åˆ’åˆ†</h3>

<p>å¦‚å›¾ï¼šnumRows ï¼ 3, numCols ï¼ 3, é‚£æ•´ä¸ªç»˜åˆ¶å›¾è¡¨æ ·å¼ä¸º 3X3 çš„å›¾ç‰‡åŒºåŸŸ</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_60_0.png" /></p>

<h3 id="ä¸è§„åˆ™åˆ’åˆ†">ä¸è§„åˆ™åˆ’åˆ†</h3>

<ol>
  <li>
    <p>å°†æ•´ä¸ªè¡¨æŒ‰ç…§ 3*2 åˆ’åˆ†ï¼Œæœ¬åº”æœ‰å…­å¼ å›¾ ã€‚</p>
  </li>
  <li>
    <p>å‰ä¸¤ä¸ªç®€å•, åˆ†åˆ«å çš„ä½ç½®ä¸º(3, 2, 1) å’Œ (3, 2, 2)ï¼Œè€Œç¬¬ä¸‰ä¸ªå›¾å äº†(3,2,3) å’Œ (3,2,4)ï¼Œç¬¬å››ä¸ªå›¾å äº†(3,2,5) å’Œ (3,2,6)ã€‚</p>
  </li>
  <li>
    <p>æ•…å¯¹å…¶é‡æ–°åˆ’åˆ†, æŒ‰ç…§ 3 * 1 åˆ’åˆ†ï¼Œå‰ä¸¤ä¸ªå›¾å ç”¨äº† (3, 1, 1) çš„ä½ç½®ï¼Œç¬¬ä¸‰ä¸ªå›¾å ç”¨äº† (3, 1, 2) çš„ä½ç½®ï¼Œç¬¬å››ä¸ªå›¾å ç”¨äº† (3, 1, 2) çš„ä½ç½®ã€‚</p>
  </li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="n">plt</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>

<span class="n">plt</span><span class="p">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">321</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">322</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">312</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">313</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_63_0.png" /></p>

<p>æ‰€ä»¥è¯´å®Œå…¨å¯ä»¥æ€ä¹ˆç”»å°±æ€ä¹ˆç”»</p>

<h3 id="å¸¸è§å›¾ç”»æ³•">å¸¸è§å›¾ç”»æ³•</h3>

<h4 id="è¯´æ˜"><strong>è¯´æ˜</strong></h4>
<ul>
  <li>
    <p>é™äºç¯‡å¹…ï¼Œæˆ‘å°±ä¸ä¸€ä¸€åˆ—ä¸¾ï¼Œæˆ‘å°†é€šè¿‡ä¸Šé¢ä»‹ç»è¿‡çš„å¤šå­å›¾æ–¹æ³•ï¼ŒæŠŠ<strong><code class="language-plaintext highlighter-rouge">æ•£ç‚¹å›¾</code></strong>ï¼Œ<strong><code class="language-plaintext highlighter-rouge">æŠ˜çº¿å›¾</code></strong>ï¼Œ<strong><code class="language-plaintext highlighter-rouge">æŸ±çŠ¶å›¾</code></strong>ï¼Œ<strong><code class="language-plaintext highlighter-rouge">æ‰‡å½¢å›¾</code></strong>ï¼Œ<strong><code class="language-plaintext highlighter-rouge">ç®±å½¢å›¾</code></strong>å…¨ç”»å‡ºæ¥ã€‚</p>
  </li>
  <li>
    <p>æ›´å¤šç”»æ³•ï¼Œè¯¦ç»†è¯·è§<a href="https://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.plot">å®˜æ–¹æ–‡æ¡£</a></p>
  </li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td class="rouge-code"><pre><span class="n">plt</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">18</span><span class="p">))</span>

<span class="c1">#æ•£ç‚¹å›¾
</span><span class="n">plt</span><span class="p">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">321</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>

<span class="c1">#æŠ˜çº¿å›¾
</span><span class="n">plt</span><span class="p">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">322</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>

<span class="c1">#å‚ç›´æŸ±çŠ¶å›¾
</span><span class="n">x_bar</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">y_bar</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span>
<span class="n">plt</span><span class="p">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">323</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x_bar</span><span class="p">,</span><span class="n">y_bar</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'r'</span><span class="p">)</span>

<span class="c1">#æ°´å¹³æŸ±çŠ¶å›¾
</span><span class="n">plt</span><span class="p">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">324</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">barh</span><span class="p">(</span><span class="n">x_bar</span><span class="p">,</span><span class="n">y_bar</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'y'</span><span class="p">)</span>

<span class="c1">#ç®±çº¿å›¾
</span><span class="n">plt</span><span class="p">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">325</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="c1">#æ‰‡å½¢å›¾
</span><span class="n">sizes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="c1">#æƒé‡
</span><span class="n">explode</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#å„éƒ¨åˆ†é—´éš”
</span><span class="n">plt</span><span class="p">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">326</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">pie</span><span class="p">(</span><span class="n">sizes</span><span class="p">,</span> <span class="n">explode</span><span class="o">=</span><span class="n">explode</span><span class="p">,</span> <span class="n">autopct</span><span class="o">=</span><span class="s">'%1.1f%%'</span><span class="p">,</span>
        <span class="n">shadow</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">startangle</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">axis</span><span class="p">(</span><span class="s">'equal'</span><span class="p">)</span> 
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>(-1.1991859391653492,
 1.1308366712784419,
 -1.1617174718372747,
 1.1029389285149376)
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_67_1.png" /></p>

<h3 id="ä¸‰ç»´å›¾">ä¸‰ç»´å›¾</h3>
<ul>
  <li>ä¸‰ç»´å·¥å…·mplot3d</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="kn">import</span> <span class="n">Axes3D</span> <span class="c1">#å¼•è¿›ä¸‰ç»´ç”»æ³•ç”¨åˆ°çš„åº“
</span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="c1">#æ·»åŠ å‚æ•°projection
</span><span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span><span class="n">projection</span><span class="o">=</span><span class="s">'3d'</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">200</span><span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">x_3d</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">z</span><span class="p">)</span>
<span class="n">y_3d</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="p">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">z</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_3d</span><span class="p">,</span> <span class="n">y_3d</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'grey'</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_69_0.png" /></p>

<h1 id="è¿›é˜¶ä¿®ç‚¼">è¿›é˜¶ï¼ˆä¿®ç‚¼ï¼‰</h1>

<h2 id="seabornæ•°æ®å¯è§†åŒ–">Seabornæ•°æ®å¯è§†åŒ–</h2>
<p>è™½ç„¶Matplotlibå·²ç»è¯æ˜äº†å…¶åœ¨æ•°æ®ç§‘å­¦æ•°æ®å¯è§†åŒ–çš„åœ°ä½ï¼Œä½†æ˜¯ä¸å¾—ä¸æ‰¿è®¤ï¼Œå…¶è¿˜æ˜¯æœ‰ä¸€äº›ä¸æ”¯æŒçš„åŠŸèƒ½ï¼Œ<strong>Seaborn</strong>å±äºMatplotlibçš„ä¸€ä¸ªé«˜çº§æ¥å£,æ•…éœ€è¦è·Ÿseabornç»“åˆèµ·æ¥,ã€‚</p>

<p>æœ¬ç¯‡å‚è€ƒå€Ÿé‰´</p>
<ul>
  <li><a href="http://seaborn.pydata.org/api.html">Seaborn API</a></li>
  <li><a href="https://blog.csdn.net/qq_34264472/article/details/53814653">Pythonæ•°æ®å¯è§†åŒ–â€”seabornç®€ä»‹å’Œå®ä¾‹</a></li>
</ul>

<h3 id="set_style--set-">set_style( ), set( )</h3>

<ul>
  <li>set_style( )æ˜¯ç”¨æ¥è®¾ç½®ä¸»é¢˜çš„ï¼ŒSeabornæœ‰äº”ä¸ªé¢„è®¾å¥½çš„ä¸»é¢˜ï¼š darkgrid , whitegrid , dark , white ,å’Œ ticks</li>
  <li>é»˜è®¤ï¼š darkgrid</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="n">sns</span>

<span class="n">sns</span><span class="p">.</span><span class="n">set_style</span><span class="p">(</span><span class="s">'whitegrid'</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/75.png" /></p>

<p>set( )é€šè¿‡è®¾ç½®å‚æ•°å¯ä»¥ç”¨æ¥è®¾ç½®èƒŒæ™¯ï¼Œè°ƒè‰²æ¿ç­‰ï¼Œæ›´åŠ å¸¸ç”¨ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="n">sns</span><span class="p">.</span><span class="nb">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s">"white"</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s">"muted"</span><span class="p">,</span> <span class="n">color_codes</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>     <span class="c1">#set( )è®¾ç½®ä¸»é¢˜ï¼Œpaletteè°ƒè‰²æ¿æ›´å¸¸ç”¨  
</span><span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>  
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>  
</pre></td></tr></tbody></table></code></pre></div></div>
<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_75_0.png" /></p>

<h3 id="distplot--kdeplot-">distplot( ), kdeplot( )</h3>
<ul>
  <li>distplot( )ä¸ºhiståŠ å¼ºç‰ˆï¼Œkdeplot( )ä¸ºå¯†åº¦æ›²çº¿å›¾</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="c1">#å¯¼å…¥pandasåº“
</span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="n">df_iris</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'iris.csv'</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span> <span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

<span class="c1">#kdeæ˜¯å¯†åº¦æ›²çº¿ï¼Œrugæ˜¯è¾¹é™…æ¯›æ¯¯
</span><span class="n">sns</span><span class="p">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">df_iris</span><span class="p">[</span><span class="s">'PetalLength'</span><span class="p">],</span><span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">kde</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">rug</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span> 

<span class="c1">#shadeæ˜¯é˜´å½±
</span><span class="n">sns</span><span class="p">.</span><span class="n">kdeplot</span><span class="p">(</span><span class="n">df_iris</span><span class="p">[</span><span class="s">'PetalLength'</span><span class="p">],</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">shade</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_79_0.png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="n">sns</span><span class="p">.</span><span class="nb">set</span><span class="p">(</span><span class="n">palette</span> <span class="o">=</span> <span class="s">'muted'</span><span class="p">,</span><span class="n">color_codes</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">rs</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">RandomState</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">rs</span><span class="p">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">f</span><span class="p">,</span><span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">sharex</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">sns</span><span class="p">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">kde</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">'r'</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">sns</span><span class="p">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">hist</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">rug</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">'g'</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">sns</span><span class="p">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">hist</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">'y'</span><span class="p">,</span> <span class="n">kde_kws</span> <span class="o">=</span> <span class="p">{</span><span class="s">'shade'</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span><span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">sns</span><span class="p">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'grey'</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/80_0.png" /></p>

<h3 id="ç®±å‹å›¾-boxplot-">ç®±å‹å›¾ boxplot( )</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">sns</span><span class="p">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">df_iris</span><span class="p">[</span><span class="s">'Name'</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="n">df_iris</span><span class="p">[</span><span class="s">'SepalWidth'</span><span class="p">])</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_82_1.png" /></p>

<h3 id="çº¿æ€§å›å½’çš„è¾¹ç¼˜åˆ†å¸ƒ">çº¿æ€§å›å½’çš„è¾¹ç¼˜åˆ†å¸ƒ</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="n">sns</span>
<span class="n">sns</span><span class="p">.</span><span class="nb">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s">"darkgrid"</span><span class="p">)</span>
<span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s">"tips"</span><span class="p">)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="n">jointplot</span><span class="p">(</span><span class="s">"total_bill"</span><span class="p">,</span> <span class="s">"tip"</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">tips</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s">"reg"</span><span class="p">,</span>
                  <span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">),</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s">"m"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_84_0.png" /></p>

<p>### æ•£å°„çŸ©é˜µ</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="n">sns</span><span class="p">.</span><span class="nb">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s">"ticks"</span><span class="p">)</span>
<span class="n">sns</span><span class="p">.</span><span class="n">pairplot</span><span class="p">(</span><span class="n">df_iris</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s">"Name"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_86_1.png" /></p>

<h3 id="çƒ­åŠ›å›¾">çƒ­åŠ›å›¾</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>
<span class="n">sns</span><span class="p">.</span><span class="nb">set</span><span class="p">()</span>
<span class="c1">#åŠ è½½æ•°æ®é›†
</span><span class="n">flights_long</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s">"flights"</span><span class="p">)</span>
<span class="n">flights</span> <span class="o">=</span> <span class="n">flights_long</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="s">"month"</span><span class="p">,</span> <span class="s">"year"</span><span class="p">,</span> <span class="s">"passengers"</span><span class="p">)</span>
<span class="n">f</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">sns</span><span class="p">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">flights</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s">"d"</span><span class="p">,</span> <span class="n">linewidths</span><span class="o">=</span><span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_88_1.png" /></p>

<h3 id="çƒ­åŠ›å›¾æ•°æ®ä¸­çš„ç»“æ„">çƒ­åŠ›å›¾æ•°æ®ä¸­çš„ç»“æ„</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre><span class="n">sns</span><span class="p">.</span><span class="nb">set</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s">"brain_networks"</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">#é€‰æ‹©ç½‘ç»œçš„ä¸€ä¸ªå­é›†
</span><span class="n">used_networks</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">17</span><span class="p">]</span>
<span class="n">used_columns</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">.</span><span class="n">columns</span><span class="p">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s">"network"</span><span class="p">)</span>
                          <span class="p">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
                          <span class="p">.</span><span class="n">isin</span><span class="p">(</span><span class="n">used_networks</span><span class="p">))</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">used_columns</span><span class="p">]</span>

<span class="c1"># åˆ›å»ºä¸€ä¸ªåˆ†ç±»æ ¼æ¥è¯†åˆ«ç½‘ç»œ
</span><span class="n">network_pal</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="n">husl_palette</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="p">.</span><span class="mi">45</span><span class="p">)</span>
<span class="n">network_lut</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">used_networks</span><span class="p">),</span> <span class="n">network_pal</span><span class="p">))</span>

<span class="c1"># å°†è°ƒè‰²æ¿è½¬æ¢æˆå°†åœ¨çŸ©é˜µçš„ä¸€ä¾§ç»˜åˆ¶çš„å‘é‡
</span><span class="n">networks</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">columns</span><span class="p">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s">"network"</span><span class="p">)</span>
<span class="n">network_colors</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">Series</span><span class="p">(</span><span class="n">networks</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">df</span><span class="p">.</span><span class="n">columns</span><span class="p">).</span><span class="nb">map</span><span class="p">(</span><span class="n">network_lut</span><span class="p">)</span>

<span class="c1">#ç”»å›¾
</span><span class="n">sns</span><span class="p">.</span><span class="n">clustermap</span><span class="p">(</span><span class="n">df</span><span class="p">.</span><span class="n">corr</span><span class="p">(),</span> <span class="n">center</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s">"vlag"</span><span class="p">,</span>
               <span class="n">row_colors</span><span class="o">=</span><span class="n">network_colors</span><span class="p">,</span> <span class="n">col_colors</span><span class="o">=</span><span class="n">network_colors</span><span class="p">,</span>
               <span class="n">linewidths</span><span class="o">=</span><span class="p">.</span><span class="mi">75</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">13</span><span class="p">))</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>&lt;seaborn.matrix.ClusterGrid at 0x7f3908564f10&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/90_1.png" /></p>

<h2 id="dataframeæ•°æ®å¯è§†åŒ–">Dataframeæ•°æ®å¯è§†åŒ–</h2>
<ul>
  <li>DataFrame.plot( )å‡½æ•°</li>
</ul>

<blockquote>
  <p>DataFrame.plot(x=None,Â y=None,Â kind=â€™lineâ€™,Â ax=None,Â subplots=False,Â sharex=None,Â sharey=False,Â layout=None,figsize=None,Â use_index=True,Â title=None,Â grid=None,Â legend=True,Â style=None,Â logx=False,Â logy=False,loglog=False,Â xticks=None,Â yticks=None,Â xlim=None,Â ylim=None,Â rot=None,Â fontsize=None,Â colormap=None,table=False,Â yerr=None,Â xerr=None,Â secondary_y=False,Â sort_columns=False,Â **kwds)</p>
</blockquote>

<blockquote>
  <p>ä¸€è¡Œä»£ç å°±æå®šäº†ç”»å›¾ï¼Œç°åœ¨ç²¾é€šå¯è§†åŒ–çš„å¤§ç¥éƒ½ä¼šè¿™æ ·ç”»å›¾.</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="n">df</span> <span class="o">=</span> <span class="n">get_price</span><span class="p">(</span><span class="s">"000001.XSHG"</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s">'2018-06-01'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s">'2018-09-29'</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="s">'daily'</span><span class="p">).</span><span class="n">iloc</span><span class="p">[:,:</span><span class="mi">4</span><span class="p">]</span>
<span class="n">df</span><span class="p">.</span><span class="n">plot</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_94_1.png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">25</span><span class="p">).</span><span class="n">reshape</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">)),</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s">'a'</span><span class="p">,</span><span class="s">'b'</span><span class="p">,</span><span class="s">'c'</span><span class="p">,</span><span class="s">'d'</span><span class="p">,</span><span class="s">'e'</span><span class="p">],</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">'one'</span><span class="p">,</span><span class="s">'two'</span><span class="p">,</span><span class="s">'three'</span><span class="p">,</span><span class="s">'four'</span><span class="p">,</span><span class="s">'five'</span><span class="p">])</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="å‚ç›´æŸ±çŠ¶å›¾">å‚ç›´æŸ±çŠ¶å›¾</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">df2</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span> <span class="o">=</span> <span class="s">'bar'</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_97_1.png" /></p>

<h3 id="æ•£ç‚¹å›¾">æ•£ç‚¹å›¾</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">df</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="s">'close'</span><span class="p">,</span><span class="s">'open'</span><span class="p">,</span><span class="n">kind</span> <span class="o">=</span> <span class="s">'scatter'</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f39082f9b10&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_99_1.png" /></p>

<h3 id="æ°´å¹³æŸ±çŠ¶å›¾">æ°´å¹³æŸ±çŠ¶å›¾</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">df2</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span> <span class="o">=</span> <span class="s">'barh'</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_101_1.png" /></p>
<h3 id="æ¨ªå‘æ¡å½¢å›¾">æ¨ªå‘æ¡å½¢å›¾</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">df2</span><span class="p">.</span><span class="n">plot</span><span class="p">.</span><span class="n">barh</span><span class="p">(</span><span class="n">stacked</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_103_1.png" /></p>

<h3 id="å‚ç›´æ¡å½¢å›¾">å‚ç›´æ¡å½¢å›¾</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">df2</span><span class="p">.</span><span class="n">plot</span><span class="p">.</span><span class="n">bar</span><span class="p">(</span><span class="n">stacked</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/105_1.png" /></p>

<h3 id="ç›´æ–¹å›¾">ç›´æ–¹å›¾</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="n">df3</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">'a'</span><span class="p">:</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="p">,</span> <span class="s">'b'</span><span class="p">:</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
                 <span class="s">'c'</span><span class="p">:</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="s">'d'</span><span class="p">:</span><span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span><span class="s">'e'</span><span class="p">:</span><span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">)},</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span> <span class="s">'c'</span><span class="p">,</span><span class="s">'d'</span><span class="p">,</span><span class="s">'e'</span><span class="p">])</span>
<span class="n">df3</span><span class="p">.</span><span class="n">plot</span><span class="p">.</span><span class="n">hist</span><span class="p">(</span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/107_1.png" /></p>
<h3 id="å­å›¾">å­å›¾</h3>

<p>è®¾ç½® subplot = True,åŒæ—¶ç”»å¤šä¸ªå­å›¾</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">df</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">subplots</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>array([&lt;matplotlib.axes._subplots.AxesSubplot object at 0x7f390879c810&gt;,
       &lt;matplotlib.axes._subplots.AxesSubplot object at 0x7f3907ad5310&gt;,
       &lt;matplotlib.axes._subplots.AxesSubplot object at 0x7f3907a58650&gt;,
       &lt;matplotlib.axes._subplots.AxesSubplot object at 0x7f3907a3cb10&gt;], dtype=object)
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_109_1.png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax_1</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax_2</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax_1</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df3</span><span class="p">)</span>
<span class="n">ax_2</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>[&lt;matplotlib.lines.Line2D at 0x7f3907754d50&gt;,
 &lt;matplotlib.lines.Line2D at 0x7f39077b5b90&gt;,
 &lt;matplotlib.lines.Line2D at 0x7f39077b5350&gt;,
 &lt;matplotlib.lines.Line2D at 0x7f39077a9cd0&gt;]
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_110_1.png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">df3</span><span class="p">.</span><span class="n">diff</span><span class="p">().</span><span class="n">hist</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>array([[&lt;matplotlib.axes._subplots.AxesSubplot object at 0x7f39076e29d0&gt;,
        &lt;matplotlib.axes._subplots.AxesSubplot object at 0x7f390768a3d0&gt;],
       [&lt;matplotlib.axes._subplots.AxesSubplot object at 0x7f390760d690&gt;,
        &lt;matplotlib.axes._subplots.AxesSubplot object at 0x7f390756df10&gt;],
       [&lt;matplotlib.axes._subplots.AxesSubplot object at 0x7f390750a250&gt;,
        &lt;matplotlib.axes._subplots.AxesSubplot object at 0x7f390746ca10&gt;]], dtype=object)
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_111_1.png" /></p>

<h3 id="ç®±å‹å›¾">ç®±å‹å›¾</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">df</span><span class="p">.</span><span class="n">boxplot</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f39096d64d0&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_113_1.png" /></p>

<h1 id="é«˜æ‰‹å¿˜å‰‘">é«˜æ‰‹ï¼ˆå¿˜å‰‘ï¼‰</h1>

<h2 id="å¯è§†åŒ–å®æˆ˜å®ä¾‹">å¯è§†åŒ–å®æˆ˜å®ä¾‹</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>  
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">colors</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="n">sns</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="kn">import</span> <span class="n">Axes3D</span>
<span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="n">mtk</span>
<span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="k">as</span> <span class="n">mdate</span>
<span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">Series</span>
<span class="kn">import</span> <span class="nn">matplotlib.finance</span> <span class="k">as</span> <span class="n">mpf</span>
<span class="n">plt</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="n">use</span><span class="p">(</span><span class="s">"ggplot"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">'axes.unicode_minus'</span><span class="p">]</span><span class="o">=</span><span class="bp">False</span>
<span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">'font.sans-serif'</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s">'SimHei'</span><span class="p">]</span> <span class="c1">#æŒ‡å®šé»˜è®¤å­—ä½“ SimHeiä¸ºé»‘ä½“
</span>

<span class="k">def</span> <span class="nf">draw_distribution</span><span class="p">(</span><span class="n">indexcode</span><span class="p">,</span><span class="n">indextime</span><span class="p">,</span><span class="n">stockstart</span><span class="p">,</span><span class="n">stockend</span><span class="p">,</span><span class="n">factortime</span><span class="p">):</span>

    <span class="n">stockname</span> <span class="o">=</span> <span class="n">get_index_stocks</span><span class="p">(</span><span class="n">indexcode</span><span class="p">,</span><span class="n">date</span><span class="o">=</span><span class="n">indextime</span><span class="p">)</span>

    <span class="n">stockprice</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">return_rate</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">stock_cnname</span><span class="o">=</span><span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">stockname</span><span class="p">),</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">stockprice</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_price</span><span class="p">(</span><span class="n">stockname</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">start_date</span><span class="o">=</span><span class="n">stockstart</span><span class="p">,</span><span class="n">end_date</span><span class="o">=</span><span class="n">stockend</span>
                                <span class="p">,</span><span class="n">frequency</span><span class="o">=</span><span class="s">'daily'</span><span class="p">,</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s">'open'</span><span class="p">,</span><span class="s">'close'</span><span class="p">],</span><span class="n">skip_paused</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">fq</span><span class="o">=</span><span class="s">'pre'</span><span class="p">))</span>
        <span class="n">return_rate</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">stockprice</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">close</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">stockprice</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nb">open</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="n">stockprice</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nb">open</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="c1">#è·å–å¤šåªè‚¡ç¥¨åœ¨æŸä¸€æ—¥æœŸçš„PEå’Œå¸‚å€¼cap
</span>    <span class="n">df1</span> <span class="o">=</span> <span class="n">get_fundamentals</span><span class="p">(</span><span class="n">query</span><span class="p">(</span><span class="n">valuation</span><span class="p">.</span><span class="n">code</span><span class="p">,</span><span class="n">valuation</span><span class="p">.</span><span class="n">pe_ratio</span><span class="p">,</span><span class="n">valuation</span><span class="p">.</span><span class="n">market_cap</span><span class="p">).</span><span class="nb">filter</span><span class="p">(</span><span class="n">valuation</span><span class="p">.</span><span class="n">code</span><span class="p">.</span><span class="n">in_</span><span class="p">(</span><span class="n">stockname</span><span class="p">)),</span> <span class="n">date</span><span class="o">=</span><span class="n">factortime</span><span class="p">)</span>
    <span class="n">df1</span><span class="p">.</span><span class="n">index</span><span class="o">=</span><span class="n">df1</span><span class="p">[</span><span class="s">'code'</span><span class="p">]</span>
    <span class="k">del</span> <span class="n">df1</span><span class="p">[</span><span class="s">'code'</span><span class="p">]</span>
    <span class="c1">#è·å–ROE
</span>    <span class="n">df2</span> <span class="o">=</span> <span class="n">get_fundamentals</span><span class="p">(</span><span class="n">query</span><span class="p">(</span><span class="n">indicator</span><span class="p">.</span><span class="n">code</span><span class="p">,</span><span class="n">indicator</span><span class="p">.</span><span class="n">roe</span><span class="p">).</span><span class="nb">filter</span><span class="p">(</span><span class="n">indicator</span><span class="p">.</span><span class="n">code</span><span class="p">.</span><span class="n">in_</span><span class="p">(</span><span class="n">stockname</span><span class="p">)),</span> <span class="n">date</span><span class="o">=</span><span class="n">factortime</span><span class="p">)</span>
    <span class="n">df2</span><span class="p">.</span><span class="n">index</span><span class="o">=</span><span class="n">df2</span><span class="p">[</span><span class="s">'code'</span><span class="p">]</span>
    <span class="k">del</span> <span class="n">df2</span><span class="p">[</span><span class="s">'code'</span><span class="p">]</span>
    <span class="c1">#è·å–è‚¡ç¥¨åå­—
</span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">stockname</span><span class="p">),</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">stock_cnname</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_security_info</span><span class="p">(</span><span class="n">stockname</span><span class="p">[</span><span class="n">i</span><span class="p">]).</span><span class="n">display_name</span><span class="p">)</span>
    <span class="c1">#print stock_cnname
</span>
    <span class="n">result</span><span class="o">=</span><span class="n">df1</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">df2</span><span class="p">)</span>
    <span class="n">result</span><span class="p">[</span><span class="s">'return_rate'</span><span class="p">]</span><span class="o">=</span><span class="n">return_rate</span>
    <span class="n">result</span><span class="p">[</span><span class="s">'cnname'</span><span class="p">]</span><span class="o">=</span><span class="n">stock_cnname</span>
    <span class="n">indexcnname</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">get_security_info</span><span class="p">(</span><span class="n">indexcode</span><span class="p">).</span><span class="n">display_name</span><span class="p">)</span>
  
    <span class="c1">#æ”¶ç›Šç‡åˆ†å¸ƒ
</span>    <span class="n">plt</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">'%sè‡³%s%sæŒ‡æ•°æ”¶ç›Šç‡åˆ†å¸ƒ'</span><span class="o">%</span><span class="p">(</span><span class="n">stockstart</span><span class="p">,</span><span class="n">stockend</span><span class="p">,</span><span class="n">indexcnname</span><span class="p">),</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span> 
    <span class="n">sns</span><span class="p">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">how</span><span class="o">=</span><span class="s">'any'</span><span class="p">).</span><span class="n">return_rate</span><span class="p">,</span><span class="n">kde</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">u'æ”¶ç›Šç‡'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">u'é¢‘æ•°'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
    
    <span class="c1">#å‰äº”åäº”  
</span>    <span class="n">result_aftsort</span><span class="o">=</span><span class="n">result</span><span class="p">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">'return_rate'</span><span class="p">],</span><span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">).</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">how</span><span class="o">=</span><span class="s">'any'</span><span class="p">)</span>
    <span class="n">blist</span><span class="o">=</span><span class="n">result_aftsort</span><span class="p">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">wlist</span><span class="o">=</span><span class="n">result_aftsort</span><span class="p">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">best5_index</span><span class="o">=</span><span class="n">blist</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">values</span>
    <span class="n">worst5_index</span><span class="o">=</span><span class="n">wlist</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">values</span>   
    <span class="c1">#print blist
</span>    <span class="c1">#print wlist
</span>    
    <span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="n">best5_index</span><span class="p">,</span><span class="n">worst5_index</span><span class="p">]</span>
    <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="n">blist</span><span class="p">.</span><span class="n">cnname</span><span class="p">,</span><span class="n">wlist</span><span class="p">.</span><span class="n">cnname</span><span class="p">]</span> 
    <span class="n">title</span><span class="o">=</span><span class="p">[</span><span class="s">u'æœ€å¥½'</span><span class="p">,</span><span class="s">u'æœ€å·®'</span><span class="p">]</span>
    
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="p">:</span>  
        <span class="n">plt</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
        <span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">'%sè‡³%s%sæŒ‡æ•°%s5æ”¯èµ°åŠ¿å¯¹æ¯”'</span><span class="o">%</span><span class="p">(</span><span class="n">stockstart</span><span class="p">,</span><span class="n">stockend</span><span class="p">,</span><span class="n">indexcnname</span><span class="p">,</span><span class="n">title</span><span class="p">[</span><span class="n">j</span><span class="p">]),</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>    
        <span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">u'æ—¶é—´'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
        <span class="n">closeprice</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">tradedate</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">closerate</span><span class="o">=</span><span class="p">[]</span> 
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">]),</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">closeprice</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_price</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="n">start_date</span><span class="o">=</span><span class="n">stockstart</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="n">stockend</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="s">'daily'</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s">'close'</span><span class="p">],</span>
                                <span class="n">skip_paused</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">fq</span><span class="o">=</span><span class="s">'pre'</span><span class="p">).</span><span class="n">close</span><span class="p">.</span><span class="n">values</span><span class="p">)</span>
            <span class="n">closerate</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">closeprice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="n">closeprice</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">tradedate</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_price</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="n">start_date</span><span class="o">=</span><span class="n">stockstart</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="n">stockend</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="s">'daily'</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s">'close'</span><span class="p">],</span>
                                <span class="n">skip_paused</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">fq</span><span class="o">=</span><span class="s">'pre'</span><span class="p">).</span><span class="n">index</span><span class="p">.</span><span class="n">values</span><span class="p">)</span>
            <span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">tradedate</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">closerate</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]))</span>
            <span class="n">plt</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">'best'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
            <span class="n">plt</span><span class="p">.</span><span class="n">grid</span><span class="p">()</span>

    
    <span class="c1">#å¸‚å€¼å¸‚ç›ˆç‡æ•£ç‚¹å›¾
</span>    <span class="c1">#è¿‡æ»¤æç«¯å€¼ï¼ˆè¦å…ˆæ•´åˆåˆ°dataframeé‡Œé¢ï¼ï¼ï¼‰è¿˜è¦å¢åŠ ä¸€åˆ—return rate
</span>    <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="n">result</span><span class="p">.</span><span class="n">pe_ratio</span> <span class="o">&gt;=-</span><span class="mi">500</span><span class="p">].</span><span class="n">dropna</span><span class="p">()</span>
    <span class="n">pe</span><span class="o">=</span><span class="n">result</span><span class="p">.</span><span class="n">pe_ratio</span><span class="p">.</span><span class="n">values</span>
    <span class="n">cap</span><span class="o">=</span><span class="n">result</span><span class="p">.</span><span class="n">market_cap</span><span class="p">.</span><span class="n">values</span>
    <span class="n">roe</span><span class="o">=</span><span class="n">result</span><span class="p">.</span><span class="n">roe</span><span class="p">.</span><span class="n">values</span>
    <span class="n">return_rate</span><span class="o">=</span><span class="n">result</span><span class="p">.</span><span class="n">return_rate</span>
    
    <span class="c1">#
</span>    <span class="c1">#cm = plt.cm.get_cmap('RdYlGn_r')  
</span>    <span class="n">cm2</span><span class="o">=</span> <span class="n">colors</span><span class="p">.</span><span class="n">ListedColormap</span><span class="p">([</span><span class="s">'#32CD32'</span><span class="p">,</span><span class="s">'#F08080'</span><span class="p">,</span><span class="s">'#FF4500'</span><span class="p">,</span><span class="s">'#8B0000'</span><span class="p">],</span><span class="n">N</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">u'å¸‚å€¼ã€å¸‚ç›ˆç‡ã€æ”¶ç›Šç‡'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">u'å¸‚ç›ˆç‡'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">u'å¸‚å€¼'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span><span class="n">cap</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">return_rate</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="n">cm2</span><span class="p">)</span>

    <span class="c1">#text
</span>    <span class="c1">#str(result.cnname[i])
</span>    <span class="k">for</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span><span class="n">cap</span><span class="p">,</span><span class="n">result</span><span class="p">.</span><span class="n">cnname</span><span class="p">):</span>
            <span class="n">plt</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="s">'%s'</span><span class="o">%</span><span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="p">),</span><span class="n">ha</span><span class="o">=</span><span class="s">'center'</span><span class="p">,</span><span class="n">va</span><span class="o">=</span><span class="s">'top'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>   
    <span class="n">plt</span><span class="p">.</span><span class="n">colorbar</span><span class="p">()</span> 
    <span class="n">plt</span><span class="p">.</span><span class="n">grid</span><span class="p">()</span>
       
    
    <span class="c1">#3D+ROE
</span>    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s">'3d'</span><span class="p">)</span>  
    <span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">u'å¸‚å€¼ã€å¸‚ç›ˆç‡ã€å‡€èµ„äº§æ”¶ç›Šç‡'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">u'å¸‚ç›ˆç‡'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span> 
    <span class="n">ax</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">u'å¸‚å€¼'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span> 
    <span class="n">ax</span><span class="p">.</span><span class="n">set_zlabel</span><span class="p">(</span><span class="s">u'å‡€èµ„äº§æ”¶ç›Šç‡'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>   
    <span class="n">ax</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">pe</span><span class="p">,</span><span class="n">cap</span><span class="p">,</span><span class="n">roe</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">return_rate</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="n">cm2</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
    
<span class="k">def</span> <span class="nf">addvolume</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">volumedata</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="n">i</span>
        <span class="n">volumedata</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">volumedata</span>
<span class="k">def</span> <span class="nf">x_fmt_func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">pos</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">idx</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">clip</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mf">0.5</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">df</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s">'datetime'</span><span class="p">].</span><span class="n">iat</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
<span class="k">def</span> <span class="nf">decorateAx</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">x_func</span><span class="p">):</span>
    <span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s">"-"</span><span class="p">)</span>
    <span class="c1">#plt.title("")
</span>    <span class="c1">#plt.xlabel("time")
</span>    <span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"index"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">x_func</span><span class="p">:</span>
        <span class="n">ax</span><span class="p">.</span><span class="n">xaxis</span><span class="p">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mtk</span><span class="p">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="n">x_func</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">return</span> 

<span class="k">def</span> <span class="nf">draw_distribution_2</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="n">end</span><span class="p">,</span><span class="n">pre</span><span class="p">,</span><span class="n">df</span><span class="p">):</span>
   
    <span class="n">datetime</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="p">.</span><span class="n">index</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s">'datetime'</span><span class="p">]</span><span class="o">=</span><span class="n">datetime</span>
    <span class="n">close1</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">close</span><span class="p">.</span><span class="n">values</span>
    <span class="n">high</span><span class="o">=</span><span class="n">df</span><span class="p">.</span><span class="n">high</span><span class="p">.</span><span class="n">values</span>
    <span class="n">low</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">low</span><span class="p">.</span><span class="n">values</span>
    <span class="n">open1</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nb">open</span><span class="p">.</span><span class="n">values</span>
    <span class="n">datetime</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="p">.</span><span class="n">index</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s">'datetime'</span><span class="p">]</span><span class="o">=</span><span class="n">datetime</span>
    <span class="n">volume</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">volume</span>
    <span class="n">volume2</span><span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">addvolume</span><span class="p">(</span><span class="n">volume</span><span class="p">))</span>
    <span class="n">idx_pxy</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="n">df</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">volume</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">volume</span>
    <span class="n">dates</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">index</span>
    <span class="n">left</span><span class="p">,</span><span class="n">width</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span><span class="mf">0.8</span>
    <span class="n">rect_vol</span> <span class="o">=</span> <span class="p">[</span><span class="n">left</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="n">width</span><span class="p">,</span><span class="mf">0.3</span><span class="p">]</span>
    <span class="n">rect_main</span> <span class="o">=</span> <span class="p">[</span><span class="n">left</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="n">width</span><span class="p">,</span><span class="mf">0.5</span><span class="p">]</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">9</span><span class="p">))</span>
    <span class="n">ax_vol</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_axes</span><span class="p">(</span><span class="n">rect_vol</span><span class="p">)</span>
    <span class="n">ax_vol</span><span class="p">.</span><span class="n">fill_between</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">240</span><span class="p">),</span><span class="n">volume</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="s">'y'</span><span class="p">)</span>
    <span class="n">decorateAx</span><span class="p">(</span><span class="n">ax_vol</span><span class="p">,</span> <span class="n">idx_pxy</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s">'close'</span><span class="p">],</span><span class="s">'green'</span><span class="p">,</span> <span class="n">x_fmt_func</span><span class="p">)</span>
    <span class="n">ax_main</span>  <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_axes</span><span class="p">(</span><span class="n">rect_main</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">u'ä¸Šè¯æŒ‡æ•°2018å¹´9æœˆ28æ—¥èµ°åŠ¿'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">22</span><span class="p">)</span>
    <span class="n">ax_main</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">volume2</span><span class="p">,</span><span class="n">close1</span><span class="p">)</span>
    
<span class="c1">#è°ƒç”¨å‡½æ•°1   
</span><span class="n">indexcode</span><span class="o">=</span><span class="s">'000300.XSHG'</span><span class="c1">#æŒ‡æ•°ä»£ç     SZ50-000016;HS300-000300;ZZ800-000906;ZZ500-000905
</span><span class="n">indextime</span><span class="o">=</span><span class="s">'2017-01-01'</span><span class="c1">#æŒ‡æ•°æˆåˆ†å–å€¼æ—¶é—´
</span><span class="n">stockstart</span><span class="o">=</span><span class="s">'2017-01-01'</span><span class="c1">#è‚¡ç¥¨è¡Œæƒ…å¼€å§‹æ—¶é—´
</span><span class="n">stockend</span><span class="o">=</span><span class="s">'2017-12-31'</span><span class="c1">#è‚¡ç¥¨è¡Œæƒ…ç»“æŸæ—¶é—´
</span><span class="n">factortime</span><span class="o">=</span><span class="s">'2017-01-01'</span><span class="c1">#è´¢åŠ¡æ•°æ®å–å€¼æ—¶é—´
</span><span class="n">draw_distribution</span><span class="p">(</span><span class="n">indexcode</span><span class="p">,</span><span class="n">indextime</span><span class="p">,</span><span class="n">stockstart</span><span class="p">,</span><span class="n">stockend</span><span class="p">,</span><span class="n">factortime</span><span class="p">)</span>

<span class="c1">#è°ƒç”¨å‡½æ•°2   
</span><span class="n">start</span> <span class="o">=</span><span class="s">'2018-09-28 9:30:00'</span>
<span class="n">end</span> <span class="o">=</span> <span class="s">'2018-09-28 15:00:00'</span>
<span class="n">pre</span> <span class="o">=</span> <span class="s">'2018-09-27'</span>   
<span class="n">df</span> <span class="o">=</span> <span class="n">get_price</span><span class="p">(</span><span class="s">'000001.XSHG'</span><span class="p">,</span><span class="n">start_date</span><span class="o">=</span><span class="n">start</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="n">end</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="s">'1m'</span><span class="p">)</span>
<span class="n">draw_distribution_2</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="n">end</span><span class="p">,</span><span class="n">pre</span><span class="p">,</span><span class="n">df</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div align="center"><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_116_0.png" /></div>
<div align="center"><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_116_1.png" /></div>
<div align="center"><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_116_2.png" /></div>
<div align="center"><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_116_3.png" /></div>
<div align="center"><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_116_4.png" /></div>
<div align="center"><img src="http://i.caigoubao.cc/627139/bgpc/uyer/output_116_5.png" /></div>

<h1 id="ç»“è¯­">ç»“è¯­</h1>
<ul>
  <li>æˆ‘å¸Œæœ›é€šè¿‡è¿™ç¯‡æ•™ç¨‹ï¼Œèƒ½å¤Ÿåœ¨æ•°æ®å¯è§†åŒ–ä¸Šå¸®ä½ å°‘èµ°å¼¯è·¯ï¼Œå°‘æ‰å‘ï¼Œæˆ‘çš„åˆè¡·æ˜¯æƒ³åƒæ­¦ä¾ ä¸–ç•Œä¸€æ ·ï¼Œä¼ æˆå‰‘æ³•ç»™ä½ ï¼Œç„¶åå‹¤åŠ ä¿®ç‚¼ï¼Œå½“ä½ ç†Ÿç»ƒåˆ°å¯ä»¥æŠ›å¼€æ¡æ¡æ¡†æ¡†ï¼Œä»è€Œè¾¾åˆ°èä¼šè´¯é€šçš„ç¨‹åº¦æ—¶ï¼Œä½ å°±å·®ä¸å¤šæˆä¸ºé«˜æ‰‹äº†ï¼Œæ­¤æ—¶æ— å‰‘èƒœæœ‰å‰‘ï¼Œå²‚ä¸å¦™å“‰ï¼åŠ æ²¹å§ï¼</li>
  <li>å¦‚æœä½ åœ¨å­¦ä¹ ä¸Šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿é€šè¿‡<strong>1115223619@qq.com</strong>æˆ–è€…<a href="https://ownyulife.top/">è¿™é‡Œ</a>è·Ÿæˆ‘äº¤æµã€‚</li>
</ul>

<hr />
<center>æœ¬æ–‡åªç”¨äºå¹³æ—¶æ•™å­¦å­¦ä¹ ï¼Œæœªç»å¾—ä½œè€…åŒæ„ç¦æ­¢ç›´æ¥è½¬è½½æˆ–ç¼–è¾‘åè½¬è½½ã€‚</center>

<hr />
:ET